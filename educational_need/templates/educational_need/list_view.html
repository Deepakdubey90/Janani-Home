{% extends 'educational_need/base.html' %}
{% load avatar_tags %}
{% load static %}

{% block content %}
    <nav class="navbar navbar-inverse visible-xs">
        {% include 'educational_need/filter_xs.html' %}
    </nav>

    <div class="container-fluid">
        <div class="row content">

            <div class="col-sm-3 sidenav hidden-xs">
            {% include 'educational_need/filter.html' %}
            </div>

            <div class="col-sm-9">
                <h1>Educational Need <small class="text-muted">Find and help people in educational need</small></h1>
                {% if user.is_authenticated %}
                {% else %}
                <p class="alert alert-info">Want to submit your application or help others in their need? <a href="{% url 'signup' %}">Sign-up</a> or
                    <a href="{% url 'login' %}">log in</a> to your account.</p>
                {% endif %}
                <hr />
                <div id="results-list">
                    {% for result in object_list %}
                        <div class="result-{{ result.pk }}">
                            <div class="panel panel-default">
                              <div class="panel-heading"><strong>{{ result.user.first_name }} {{ result.user.last_name }}</strong></div>
                              <div class="panel-body">
                                <div class="view-details-btn"><a href="{% url 'detail_view' pk=result.pk %}" class="btn btn-default btn-lg" role="button">View Details</a><br/><small>View count: {{ result.view_count }}</small></div>
                                <div class="profile-image">{% avatar result.user 150 %}</div>
                                <p>Country: <strong>{{ result.user.profile.country.name }}</strong></p>
                                <p>State: {{ result.user.profile.state }}</p>
                                <p>City: {{ result.user.profile.city }}</p>
                                <p>Amount required: <strong>{{ result.amount_required }}</strong></p>
                              </div>
                            </div>
                        </div>
                    {% endfor %}

                    {% if is_paginated %}
                        <ul class="pagination">
                        {% if page_obj.has_previous %}
                            <li>
                                <span><a href="?page={{ page_obj.previous_page_number }}">Previous</a></span>
                            </li>
                        {% endif %}
                            <li class="">
                                <span>Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.</span>
                            </li>
                        {% if page_obj.has_next %}
                            <li>
                                <span><a href="?page={{ page_obj.next_page_number }}">Next</a></span>
                            </li>
                        {% endif %}
                        </ul>
                    {% endif %}

                </div>

            </div>
        </div>
    </div>
{% endblock content %}
